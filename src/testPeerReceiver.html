<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta content="utf-8" http-equiv="encoding">

        <script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js"></script>
        <script src="https://cdn.rawgit.com/davidshimjs/qrcodejs/gh-pages/qrcode.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/stats.js/r16/Stats.min.js"></script>
        <script src = "./connectionManagerClass.js"> </script>
    </head>

    <body>
        <div id="stats" style='float: right;'></div>

        <center>
            <div id="qrbox" class="modal">
    
                <div class="modal-content">
                    <p> Scan the qr code to connect your device.</p>
                    <div id="qrcode"></div>
                
                </div>
              
              </div>
            </center>

        <script>
            var popupBox = document.getElementById("qrbox");
            var code = document.getElementById("qrcode");
            

            var peer = new Peer(null, {
                debug: 2
            });   //create a new peerjs object

            var cm = new ConnectionManager(peer);  //pass the peerjs object to the connectionManager class

            var printData = (data) => {
                console.log(data);
            }

            cm.registerCallback(printData); //print data anytime remote peer sends
            /* optional: cm.registerCallback(label, function), label is to when the function should be called (open, data, close)
            */

            cm.createQrCode("hello", code); //pass url and the html elemet the code should be linked to 
            
            var arr = {};
            arr["hello"] = "hi";
            console.log("hello" in arr)

            console.log(arr);
        </script>
    </body>

</html>